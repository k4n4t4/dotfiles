#!/bin/sh
set -eu

[ $# -eq 0 ] && set -- "$(pwd)"

DIR="$(cd "$(dirname -- "$1")" && pwd)"
SEPARATOR="/"
BASE="$(basename -- "$1")"

case "$DIR" in ( "/" | "//" )
  SEPARATOR=""
esac

case "$BASE" in
  ( "/" )
    BASE=""
  ;;
  ( "." )
    BASE=""
    SEPARATOR=""
  ;;
  ( ".." )
    BASE=""
    SEPARATOR=""
    DIR="$(dirname -- "$DIR")"
  ;;
esac

printf "%s" "$DIR$SEPARATOR$BASE"
